<body>
<h2>Sales Dashboard</h2>
<button onclick="logout()">Logout</button>
<div id="profile"></div>

<script>
const sessionId=localStorage.getItem("sessionId");

fetch('/api/profile',{
headers:{sessionid:sessionId}
}).then(r=>r.json())
.then(data=>{
document.getElementById("profile").innerHTML=`
<p><b>Name:</b> ${data.firstname} ${data.lastname}</p>
<p><b>Email:</b> ${data.email}</p>
<p><b>Phone:</b> ${data.phone}</p>
<p><b>Status:</b> ${data.status}</p>`;
});

// Auto logout after 15 min
setTimeout(()=>logout(),15*60*1000);

function logout(){
fetch('/api/logout',{
method:'POST',
headers:{sessionid:sessionId}
}).then(()=>{
localStorage.clear();
window.location="login.html";
});
}

// Prevent back button
window.history.pushState(null,null,window.location.href);
window.onpopstate=function(){window.history.go(1);}
</script>
</body>
